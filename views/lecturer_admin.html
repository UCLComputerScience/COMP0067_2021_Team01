
<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
	<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>Voltage &mdash; 100% Free Fully Responsive HTML5 Template by FREEHTML5.co</title>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="description" content="Free HTML5 Template by FREEHTML5.CO" />
	<meta name="keywords" content="free html5, free template, free bootstrap, html5, css3, mobile first, responsive" />
	<meta name="author" content="FREEHTML5.CO" />

  	<!-- 
	//////////////////////////////////////////////////////

	FREE HTML5 TEMPLATE 
	DESIGNED & DEVELOPED by FREEHTML5.CO
		
	Website: 		http://freehtml5.co/
	Email: 			info@freehtml5.co
	Twitter: 		http://twitter.com/fh5co
	Facebook: 		https://www.facebook.com/fh5co

	//////////////////////////////////////////////////////
	-->

  	<!-- Facebook and Twitter integration -->
	<meta property="og:title" content=""/>
	<meta property="og:image" content=""/>
	<meta property="og:url" content=""/>
	<meta property="og:site_name" content=""/>
	<meta property="og:description" content=""/>
	<meta name="twitter:title" content="" />
	<meta name="twitter:image" content="" />
	<meta name="twitter:url" content="" />
	<meta name="twitter:card" content="" />
	<style>
		.menu li {
			list-style:none;
			float:left;
			width:90px;
			overflow:visible;
			cursor:pointer;
		}

		ul.level2 {
			width:90px;
			display:none;
		}
		ul.level2 {
			margin:-28px 0 0 90px;
		}
		li.imyeah:hover > ul, ul.level2 > li.imyeah:hover > ul {
			display:block;
		}
		.fh5co-nav-style-1 .dropdown .dropdown-menu {
			border: 1px solid #0b2e13;
			background:#0f6674;
		}
		.table-responsive th {
			text-align: center;
		}
		.table-responsive td {
			text-align: center;
		}
	</style>

	<!-- Place favicon.ico and apple-touch-icon.png in the root directory -->
	<link rel="shortcut icon" href="/public/favicon.ico">

	<!-- Google Fonts -->
	<link href='https://fonts.googleapis.com/css?family=Open+Sans:400,300,700|Monsterrat:400,700|Merriweather:400,300italic,700' rel='stylesheet' type='text/css'>
	
	<!-- Animate.css -->
	<link rel="stylesheet" href="/public/css/animate.css">
	<!-- Icomoon Icon Fonts-->
	<link rel="stylesheet" href="/public/css/icomoon.css">
	<!-- Magnific Popup-->
	<link rel="stylesheet" href="/public/css/magnific-popup.css">
	<!-- Owl Carousel -->
	<link rel="stylesheet" href="/public/css/owl.carousel.min.css">
	<link rel="stylesheet" href="/public/css/owl.theme.default.min.css">
	<!-- Bootstrap  -->
	<link rel="stylesheet" href="/public/css/bootstrap.css">
	
	<!-- Cards -->
	<link rel="stylesheet" href="/public/css/cards.css">

	<!-- Modernizr JS -->
	<script src="/public/js/modernizr-2.6.2.min.js"></script>
	<!-- FOR IE9 below -->
	<!--[if lt IE 9]>
		<script src="/public/js/respond.min.js"></script>
		<![endif]-->

<!--table-->
<!--	<link href="/public/css/styles.css" rel="stylesheet" />-->
	<link href="https://cdn.datatables.net/1.10.20/css/dataTables.bootstrap4.min.css" rel="stylesheet" crossorigin="anonymous" />
	<script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/js/all.min.js" crossorigin="anonymous"></script>


	</head>
	<body>
<!--Navigation bar-->
	<div id="fh5co-page">
		<nav class="fh5co-nav-style-1" role="navigation" data-offcanvass-position="fh5co-offcanvass-left" style="background-image: url(/public/images/moodle.jpg);">
			<div class="container">
				<div class="col-lg-3 col-md-3 col-sm-3 col-xs-12 fh5co-logo">
					<a href="#" class="js-fh5co-mobile-toggle fh5co-nav-toggle"><i></i></a>
					<a href="#">Traffic Light Feedback System</a>
				</div>
				<div class="col-lg-5 col-md-5 col-sm-5 text-center fh5co-link-wrap">
					<ul data-offcanvass="yes">
						<li><a href="lecturer_homepage" style="margin-left: 0;">Home</a></li>
						<li class="dropdown">
							<a class="dropdown-toggle" data-toggle="dropdown">Module({{YS}})<span class="caret"></span></a>
							<ul class="dropdown-menu" role="menu" >
								<div class="fh5co-link-wrap">
									{{each modules}}
									<li><a href="lecturer_module?moduleID={{$value.moduleCode}}&YT={{$value.yearTerm}}">{{$value.moduleCode}}</a></li>
									{{/each}}
								</div>
							</ul>
						</li>
						<li class="dropdown">
							<a class="dropdown-toggle" data-toggle="dropdown">Semester<span class="caret"></span></a>
							<ul class="dropdown-menu" role="menu" >
								<div class="fh5co-link-wrap" style="width: 145px; text-align: center" id="year_semester">

								</div>
							</ul>
						</li>
						<li class="active"><a href="lecturer_admin">Admin</a></li>
					</ul>
				</div>
				<div class="col-lg-4 col-md-4 col-sm-4 text-right fh5co-link-wrap">
					<ul class="fh5co-special" data-offcanvass="yes">
						<li><a href="#">Hi, {{uname}}</a></li>
						<li><a href="#" class="call-to-action" data-toggle="modal" data-target="#logoutModal">Logout</a></li>
					</ul>
				</div>
			</div>
		</nav>

		<div class="fh5co-cover fh5co-cover-style-2" data-stellar-background-ratio="0" data-next="yes" style="background-image: url(/public/images/img_same_dimension_3.jpg);">
			<div class="fh5co-cover-text">
				<div class="container">
					<br><br><br><br><br>
					<nav class="navbar" role="navigation">
						<ol class="breadcrumb">
							<li class="li"><a href="lecturer_homepage">Home</a></li>
							<li class="active">admin</li>
						</ol>
					</nav>
				</div>
				<div class="container wow fadeInUp" data-wow-duration="1s" data-wow-delay=".5s"  style="background-color: #f9f6f0; border: 1px solid #999999; margin:25px auto 25px auto">
					<div id="layoutSidenav_content">
						<br>
						<main>
							<div class="container-fluid">
								<div class="card mb-4">
									<div class="card-header">
										<div class="row">
											<div class="text-center">
												<div class="fh5co-cover-intro">
													<h1 class="cover-text-lead wow fadeInUp" data-wow-duration="1s" data-wow-delay="1.1s" style="color: #000000">Manage Your Modules</h1>
												</div>
											</div>
										</div>
									</div>
									<div class="card-body">
										<div class="fade in active wow fadeInUp" data-wow-duration="1s" data-wow-delay="1.4s">
											<div class="row">
												<div class="container">
													{{each member}}
													<div class="col-md-2">
														<img src="/public/images/doctor_1.jpeg" width="150" height="160">
														<div class="row text-center">
															<h5>Member {{$value.memberIndex}}: {{$value.forename}} {{$value.surname}}</h5>
														</div>
													</div>
													{{/each}}
												</div>
											</div>
											<div style="float: right;">
<!--												<button href="#" class="call-to-action" data-toggle="modal" data-target="#export_to_csv">Export module feedback</button>-->
												<button href="#" class="call-to-action" data-toggle="modal" data-target="#create_form"><span class="icon-plus"></span> Create a New Module</button>
											</div>
											<br>
											<div style="background-color: #ffffff; display: block; position: relative; margin:25px auto 25px auto">
												<br>
												<div class="table-responsive" style="margin:auto 25px auto 25px">
													<table class="table table-bordered" id="" width="100%" cellspacing="0">
														<thead>
														<tr>
															<th>Module Code</th>
															<th>Module Name</th>
															<th>Weeks</th>
															<th>students</th>
															<th>Groups</th>
															<th>Operation</th>
<!--															<th>Export csv</th>-->
														</tr>
														</thead>
														<tbody>
														{{each moduleInfo}}
														<tr>
															<td>{{$value.moduleCode}}</td>
															<td>{{$value.moduleName}}</td>
															<td>{{$value.numberofWeeks}}</td>
															<td>{{$value.NumberOfStudent}}</td>
															<td>{{$value.NumberOfTeam}}</td>
															<td style="width: 18rem">
																<button href="#" class="call-to-action" data-toggle="modal" data-target="#view_form_{{$value.moduleCode}}"><span class="icon-eye"></span></button>
																<button style="position: relative" href="#" class="call-to-action" data-toggle="modal" data-target="#modify_form_{{$value.moduleCode}}" id="{{$value.index}}" onclick="getID(id)"><span class="icon-pencil"></span></button>
<!--																<form role="form" id="csv_destination" action="/lecturer_addModule" enctype="multipart/form-data" method="post">-->
<!--																	<div class="form-group col-md-6">-->
<!--																		<label>Change module cover</label>-->
<!--																		<input name="coverImage" type="file" accept="image/png, image/jpeg, image/jpg" id="modify_img">-->
<!--																		<p class="help-block">Select jpg/jpeg file.(optional)</p>-->
<!--																	</div>-->
<!--																</form>-->
																<button style="position: relative"><a href="lecturer_exportCsv?module={{$value.moduleCode}}" style="color: #777777"><span class="icon-download"></span></a></button>
																<button style=" position: relative" href="#" class="call-to-action" data-toggle="modal" data-target="#delete_{{$value.moduleCode}}"><span class="icon-delete"></span></button>
															</td>
														</tr>
														{{/each}}
														</tbody>
													</table>
												</div>
											</div>
<!--											<div style="float: right; margin:auto auto 25px auto">-->
<!--												<button href="#" class="call-to-action" data-toggle="modal" data-target="#set_year_semester">Set current year and semester</button>-->
<!--											</div>-->
										</div>
									</div>
								</div>
							</div>
						</main>
					</div>
				</div>
			</div>
			<br>
		</div>
		<!--footer-->
		<div style="background-image: url(/public/images/moodle.jpg); height: 100px;">
			<div style="text-align: center; height: 100px; line-height: 100px;">
				<b style="color: #000000; font-size: 20px;">Copyright@UCL Department of Computer Science</b>
			</div>
		</div>
		<!-- END footer -->
	</div>
	<!-- END page-->

	{{each moduleInfo}}
	<div class="modal fade" id="delete_{{$value.moduleCode}}" tabindex="-1" role="dialog" aria-labelledby="lecturer_delete_module"
		 aria-hidden="true">
		<div class="modal-dialog" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title">Ready to delete?</h5>
					<button class="close" type="button" data-dismiss="modal" aria-label="Close">
						<span aria-hidden="true">×</span>
					</button>
				</div>
				<div class="modal-body">Are you sure to delete {{$value.moduleName}} and all relevant data?</div>
				<div class="modal-footer">
					<button class="btn btn-secondary" type="button" data-dismiss="modal">Cancel</button>
					<a class="btn btn-primary" href="lecturer_delete_module?module={{$value.moduleCode}}">Delete</a>
				</div>
			</div>
		</div>
	</div>
	{{/each}}

	<!--export_csv-->
<!--	{{each moduleInfo}}-->
<!--	<div class="modal fade" id="export_{{$value.moduleCode}}" tabindex="-1" role="dialog" aria-labelledby="lecturer_exportCsv"-->
<!--		 aria-hidden="true">-->
<!--		<div class="modal-dialog" role="document">-->
<!--			<div class="modal-content">-->
<!--				<div class="modal-header">-->
<!--					<h5 class="modal-title" id="export_label">Export feedback of {{$value.moduleName}}</h5>-->
<!--					<button class="close" type="button" data-dismiss="modal" aria-label="Close">-->
<!--						<span aria-hidden="true">×</span>-->
<!--					</button>-->
<!--				</div>-->
<!--				<form role="form" id="exportMod" action="/lecturer_exportCsv" method="post">-->
<!--					<div class="modal-body">-->
<!--						<div class="form-group" align="center">-->
<!--							<label>Select a dictionary</label>-->
<!--							<input name="dictionary" type="file" id="dic_{{$value.moduleCode}}">-->
<!--						</div>-->
<!--					</div>-->
<!--					<div class="modal-footer form-group">-->
<!--						<button class="btn btn-secondary" type="button" data-dismiss="modal">Cancel</button>-->
<!--						<button class="btn btn-primary" type="submit">Submit</button>-->
<!--					</div>-->
<!--				</form>-->
<!--			</div>-->
<!--		</div>-->
<!--	</div>-->
<!--	{{/each}}-->

<!--	&lt;!&ndash;export_csv&ndash;&gt;-->
<!--	<div class="modal fade" id="export_to_csv" tabindex="-1" role="dialog" aria-labelledby="lecturer_exportCsv"-->
<!--		 aria-hidden="true">-->
<!--		<div class="modal-dialog" role="document">-->
<!--			<div class="modal-content">-->
<!--				<div class="modal-header">-->
<!--					<h5 class="modal-title" id="export_label">Export module feedback</h5>-->
<!--					<button class="close" type="button" data-dismiss="modal" aria-label="Close">-->
<!--						<span aria-hidden="true">×</span>-->
<!--					</button>-->
<!--				</div>-->
<!--				<form role="form" id="exportMod" action="/lecturer_exportCsv" method="post">-->
<!--					<div class="modal-body">-->
<!--						{{each moduleInfo}}-->
<!--						<div class="form-group" align="center">-->
<!--							<label>-->
<!--								<input type="checkbox" value="{{$value.moduleCode}}" name="module">  {{$value.moduleName}}-->
<!--							</label>-->
<!--						</div><br>-->
<!--						{{/each}}-->
<!--					</div>-->
<!--					<div class="modal-footer form-group">-->
<!--						<button class="btn btn-secondary" type="button" data-dismiss="modal">Cancel</button>-->
<!--						<button class="btn btn-primary" type="submit">Submit</button>-->
<!--					</div>-->
<!--				</form>-->
<!--			</div>-->
<!--		</div>-->
<!--	</div>-->

	<!--create_form-->
	<div class="modal fade" id="create_form" tabindex="-1" role="dialog" aria-labelledby="create_form_label"
		 aria-hidden="true">
		<div class="modal-dialog" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title" id="create_form_label">Create a module</h5>
					<button class="close" type="button" data-dismiss="modal" aria-label="Close">
						<span aria-hidden="true">×</span>
					</button>
				</div>
				<form role="form" id="addMod" action="/lecturer_addModule" enctype="multipart/form-data" method="post">
					<div class="modal-body">
						<div class="form-group"><br>
							<label>Module ID</label>
							<input type="text" name="modID" id="create_modID" class="form-control" placeholder="Enter module ID">
						</div>
						<div class="form-group">
							<label>Module name</label>
							<input type="text" name="modName" id="create_modName" class="form-control" placeholder="Enter module name">
						</div>
						<div class="form-group">
							<label>Year semester (format: year-semester)</label>
							<input type="text" name="modYs" id="create_modYS" class="form-control" placeholder="Enter module's year and semester (2021-1)">
						</div>
						<div class="form-group">
							<label>Number of Weeks</label>
							<input type="text" name="NoW" id="create_modNW" class="form-control" placeholder="Enter how many weeks the module will last">
						</div>
						<div class="form-group">
							<label>Module description</label>
							<textarea class="form-control" id="create_modDes" name="modDes" rows="5" placeholder="Enter module description"></textarea>
						</div>
						<div class="form-group">
							<label>Module plan</label>
							<textarea class="form-control" id="create_modPlan" name="modPlan" rows="5" placeholder="Enter module plan"></textarea>
						</div>
						<div class="row">
							<div class="form-group col-md-6">
								<label>Add student csv file</label>
								<input name="studentTable" type="file" accept=".xls, .xlsx" id="create_student_csv">
								<p class="help-block">Select student csv file</p>
							</div>
							<div class="form-group col-md-6">
								<label>Add TA csv file</label>
								<input name="taTable" type="file" accept=".xls, .xlsx" id="create_ta_csv">
								<p class="help-block">Select TA file</p>
							</div>
						</div>
						<div class="row">
							<div class="form-group col-md-6">
								<label>Add grouping csv file</label>
								<input name="groupingTable" type="file" accept=".xls, .xlsx" id="create_grouping_csv">
								<p class="help-block">Select grouping csv file</p>
							</div>
						</div>
						<div class="row">
							<div class="form-group col-md-6">
								<label>Add a module cover</label>
								<input name="coverImage" type="file" accept="image/png, image/jpeg, image/jpg" id="create_cover_img">
								<p class="help-block">Select jpg/jpeg file</p>
							</div>
							<div class="form-group col-md-6">
								<label>Add student profile folder</label>
								<input name="stuImage" type="file" webkitdirectory multiple id="create_student_img">
								<p class="help-block">Select the folder of students' profiles</p>
							</div>
						</div>
					</div>
					<div class="modal-footer form-group">
						<button class="btn btn-secondary" type="button" data-dismiss="modal">Cancel</button>
						<button class="btn btn-primary" id="create_submit" type="submit">Submit</button>
					</div>
				</form>
			</div>
		</div>
	</div>
	<input type="hidden" value="{{allModuleCodes}}" id="moduleCodes">
	<input type="hidden" value="{{muduleNumber}}" id="moduleNumber">
	<!--modify_form-->
	{{each moduleInfo}}
	<div class="modal fade" id="modify_form_{{$value.moduleCode}}" tabindex="-1" role="dialog" aria-labelledby="modify_form_label_{{$value.moduleCode}}"
		 aria-hidden="true">
		<div class="modal-dialog" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title" id="modify_form_label_{{$value.moduleCode}}">Modify your module</h5>
					<button class="close" type="button" data-dismiss="modal" aria-label="Close">
						<span aria-hidden="true">×</span>
					</button>
				</div>
				<form role="form" action="/lecturer_modifyModule" id="modifyMod_{{$value.index}}" enctype="multipart/form-data" method="post">
					<div class="modal-body">
						<div class="form-group">
							<label>Module ID</label>
							<textarea id="modifyID" type="text" rows="1" name="modID" readonly="readonly" class="form-control">{{$value.moduleCode}}</textarea>
						</div>
						<div class="form-group">
							<label>Module Name</label>
							<textarea type="text" rows="1" id="modify_modName_{{$value.index}}" name="modName" class="form-control">{{$value.moduleName}}</textarea>
						</div>
<!--						<div class="form-group">-->
<!--							<label>Year and semester</label>-->
<!--							<textarea id="modifys" type="text" rows="1" name="modYs" required class="form-control">{{$value.yearTerm}}</textarea>-->
<!--						</div>-->
						<div class="form-group">
							<label>Number of Weeks</label>
							<textarea type="text" rows="1" name="NoW" id="modify_modNW_{{$value.index}}" class="form-control">{{$value.numberofWeeks}}</textarea>
						</div>
						<div class="form-group">
							<label>Module description</label>
							<textarea class="form-control" name='modDes' id="modify_Des_{{$value.index}}" rows="5" placeholder="Enter module description">{{$value.moduleDescription}}</textarea>
						</div>
						<div class="form-group">
							<label>Module plan</label>
							<textarea class="form-control" name='modPlan' id="modify_Plan_{{$value.index}}" rows="5" placeholder="Enter module plan">{{$value.modulePlan}}</textarea>
						</div>
						<div class="row">
							<div class="form-group col-md-6">
								<label>Change grouping csv file</label>
								<input name="groupingTable" type="file" accept=".xls, .xlsx" id="modify_csv">
								<p class="help-block">Select grouping csv file.(optional)</p>
							</div>
							<div class="form-group col-md-6">
								<label>Change module cover</label>
								<input name="coverImage" type="file" accept="image/png, image/jpeg, image/jpg" id="modify_img">
								<p class="help-block">Select jpg/jpeg file.(optional)</p>
							</div>
						</div>
					</div>
					<div class="modal-footer form-group">
						<button class="btn btn-secondary" type="button" data-dismiss="modal">Cancel</button>
						<button class="btn btn-primary" id="modify_submit_{{$value.index}}" type="submit">Submit</button>
					</div>
				</form>
			</div>
		</div>
	</div>
	{{/each}}

	<!--view_form-->
	{{each moduleInfo}}
	<div class="modal fade" id="view_form_{{$value.moduleCode}}" tabindex="-1" role="dialog" aria-labelledby="view_form_label_{{$value.moduleCode}}"
		 aria-hidden="true">
		<div class="modal-dialog" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title" id="view_form_label_{{$value.moduleCode}}">View your module</h5>
					<button class="close" type="button" data-dismiss="modal" aria-label="Close">
						<span aria-hidden="true">×</span>
					</button>
				</div>
				<form role="form">
					<div class="modal-body">
						<div class="form-group">
							<label>Module ID</label>
							<textarea id="modID" type="text" rows="1" name="modID" readonly="readonly" class="form-control">{{$value.moduleCode}}</textarea>
						</div>
						<div class="form-group">
							<label>Module Name</label>
							<textarea id="modName" type="text" rows="1" name="modName" readonly="readonly" class="form-control">{{$value.moduleName}}</textarea>
						</div>
						<div class="form-group">
							<label>Number of Weeks</label>
							<textarea type="text" rows="1" name="modName" readonly="readonly" class="form-control">{{$value.numberofWeeks}}</textarea>
						</div>
						<div class="form-group">
							<label>Module description</label>
							<textarea class="form-control" name='modDes' rows="5" readonly="readonly">{{$value.moduleDescription}}</textarea>
						</div>
						<div class="form-group">
							<label>Module plan</label>
							<textarea class="form-control" name='modPlan' rows="5" readonly="readonly">{{$value.modulePlan}}</textarea>
						</div>
						<div class="form-group">
							<label>Number of Students</label>
							<input class="form-control" name='modPlan' readonly="readonly" placeholder="{{$value.NumberOfTeam}}">
						</div>
						<div class="form-group">
							<label>Number of Teams</label>
							<input class="form-control" name='modPlan' readonly="readonly" placeholder="{{$value.NumberOfStudent}}">
						</div>
					</div>
					<div class="modal-footer form-group">
						<button class="btn btn-secondary" type="button" data-dismiss="modal">Cancel</button>
					</div>
				</form>
			</div>
		</div>
	</div>
	{{/each}}

	<!-- Logout Modal-->
	<div class="modal fade" id="logoutModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
		 aria-hidden="true">
		<div class="modal-dialog" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title" id="exampleModalLabel">Ready to Leave?</h5>
					<button class="close" type="button" data-dismiss="modal" aria-label="Close">
						<span aria-hidden="true">×</span>
					</button>
				</div>
				<div class="modal-body">Select "Logout" below if you are ready to end your current session.</div>
				<div class="modal-footer">
					<button class="btn btn-secondary" type="button" data-dismiss="modal">Cancel</button>
					<a class="btn btn-primary" href="login">Logout</a>
				</div>
			</div>
		</div>
	</div>


	<!-- jQuery -->
	<script src="/public/js/jquery.min.js"></script>
	<!-- jQuery Easing -->
	<script src="/public/js/jquery.easing.1.3.js"></script>
	<!-- Bootstrap -->
	<script src="/public/js/bootstrap.min.js"></script>
	<!-- Waypoints -->
    <script src="/public/js/jquery.waypoints.min.js"></script>
	<!-- Owl Carousel -->
	<script src="/public/js/owl.carousel.min.js"></script>
	<!-- Magnific Popup -->
	<script src="/public/js/jquery.magnific-popup.min.js"></script>
	<!-- Stellar -->
	<script src="/public/js/jquery.stellar.min.js"></script>
	<!-- countTo -->
	<script src="/public/js/jquery.countTo.js"></script>
	<!-- WOW -->
	<script src="/public/js/wow.min.js"></script>
	<script>
		new WOW().init();
	</script>
	<!--table-->
	<script src="https://cdn.datatables.net/1.10.20/js/jquery.dataTables.min.js" crossorigin="anonymous"></script>
	<script src="https://cdn.datatables.net/1.10.20/js/dataTables.bootstrap4.min.js" crossorigin="anonymous"></script>
	<script src="/public/js/datatables-demo.js"></script>
	<!-- Main -->
	<script src="/public/js/main.js"></script>

	<script>
		// var date = new Date()
		// var cur_year = parseInt(date.getFullYear())
		// var stu_year_selection_html = '<option value="'+cur_year+'" selected="selected">'+cur_year+'</option>\n' +
		// 		'<option value="'+(cur_year-1)+'">'+(cur_year-2)+'</option>\n' +
		// 		'<option value="'+(cur_year-2)+'">'+(cur_year-1)+'</option>\n' +
		// 		'<option value="'+(cur_year-3)+'">'+(cur_year+1)+'</option>\n' +
		// 		'<option value="'+(cur_year-4)+'">'+(cur_year+2)+'</option>'
		// document.getElementById("year").innerHTML = stu_year_selection_html    //将该周的html插入对应的modal
	</script>
	<script>
		var year_dropsown_list_html = ''
		var date = new Date()
		var cur_year = parseInt(date.getFullYear())
		for (var i=0; i<4; i++) {
			year_dropsown_list_html = year_dropsown_list_html + '<li class="imyeah"><a href="#">Year '+(cur_year-i)+'</a>\n' +
					'\t\t\t\t\t\t\t\t\t\t<ul class="level2">\n' +
					'\t\t\t\t\t\t\t\t\t\t\t<li>select a semester</li>\n' +
					'\t\t\t\t\t\t\t\t\t\t\t<li><a href="lecturer_setYS?YS='+(cur_year-i)+'-1">1</a></li>\n' +
					'\t\t\t\t\t\t\t\t\t\t\t<li><a href="lecturer_setYS?YS='+(cur_year-i)+'-2">2</a></li>\n' +
					'\t\t\t\t\t\t\t\t\t\t\t<li><a href="lecturer_setYS?YS='+(cur_year-i)+'-3">3</a></li>\n' +
					'\t\t\t\t\t\t\t\t\t\t</ul>\n' +
					'\t\t\t\t\t\t\t\t\t</li><br>'
		}
		document.getElementById("year_semester").innerHTML = year_dropsown_list_html
	</script>
	<script>
		var moduleCodes = document.getElementById("moduleCodes").value
		// console.log(typeof moduleCodes)
		// console.log(moduleCodes)
		$(document).ready(function () {
			$('#create_submit').click(function (e) {
				e.preventDefault();
				var newCode = '"moduleCode":'+'"'+$('#create_modID').val()+'","yearTerm":'+'"'+$('#create_modYS').val()+'"'
				// console.log("*************")
				console.log($('#create_modYS').val().split('-')[1])
				if ($('#create_modID').val() === ''){
					$("#create_modID").focus();
					// alert("Please select a score.");
				}
				else if (typeof $('#create_modID').val() === 'undefined'){
					$('#create_modID').focus();
				}
				else if ($('#create_modID').val().length > 10){
					$("#create_modID").focus();
					alert("You have exceeded the 10 maximum character");
				}
				else if (moduleCodes.indexOf(newCode) !== -1) {
					// console.log("**************")
					$("#create_modID").focus();
					alert("This moduleCode has already existed in the selected semester.\n\n" +
							"If you want to modify this module, please click 'modify' button.\n\n" +
							"If you want to create a new module, please check your input.");
				}
				else if ($('#create_modName').val() === ''){
					$("#create_modName").focus();
					// alert("Please select a score.");
				}
				else if (typeof $('#create_modName').val() === 'undefined'){
					$('#create_modName').focus();
				}
				else if ($('#create_modName').val().length > 100){
					$("#create_modName").focus();
					alert("You have exceeded the 100 maximum character");
				}
				else if ($('#create_modYS').val() === ''){
					$("#create_modYS").focus();
					// alert("Please select a score.");
				}
				else if (typeof $('#create_modYS').val() === 'undefined'){
					$('#create_modYS').focus();
				}
				else if ($('#create_modYS').val().length > 6){
					$("#create_modYS").focus();
					alert("Wrong length of year & semester. \n\nHint: year 2021 semester 1 -> 2021-1");
				}
				else if ($('#create_modYS').val().indexOf('-') === -1){
					$("#create_modYS").focus();
					alert("Wrong format of year & semester. \n\nHint: year 2021 semester 1 -> 2021-1");
				}
				else if (parseInt($('#create_modYS').val().split('-')[1]) !== 1 && parseInt($('#create_modYS').val().split('-')[1]) !== 2 && parseInt($('#create_modYS').val().split('-')[1]) !== 3){
					$("#create_modYS").focus();
					alert("Wrong semester. \n\nHint: semester should be 1 or 2 or 3");
				}
				else if ($('#create_modNW').val() === ''){
					$("#create_modNW").focus();
					// alert("Please select a score.");
				}
				else if (typeof $('#create_modNW').val() === 'undefined'){
					$('#create_modNW').focus();
				}
				else if (parseInt($('#create_modNW').val()) > 20 || parseInt($('#create_modNW').val()) < 5){
					$("#create_modNW").focus();
					alert("Week number should be an integer with range from 5 to 20.");
				}
				else if ($('#create_modDes').val() === ''){
					$("#create_modDes").focus();
					// alert("Please select a score.");
				}
				else if (typeof $('#create_modDes').val() === 'undefined'){
					$('#create_modDes').focus();
				}
				else if ($('#create_modDes').val().length > 200){
					$("#create_modDes").focus();
					alert("You have exceeded the 200 maximum character");
				}
				else if ($('#create_modPlan').val() === ''){
					$("#create_modPlan").focus();
					// alert("Please select a score.");
				}
				else if (typeof $('#create_modPlan').val() === 'undefined'){
					$('#create_modPlan').focus();
				}
				else if ($('#create_modPlan').val().length > 500){
					$("#create_modPlan").focus();
					alert("You have exceeded the 500 maximum character");
				}
				else if ($('#create_grouping_csv').val() === ''){
					$("#create_grouping_csv").focus();
					// alert("Please select a score.");
				}
				else if (typeof $('#create_grouping_csv').val() === 'undefined'){
					$('#create_grouping_csv').focus();
				}
				else if ($('#create_ta_csv').val() === ''){
					$("#create_ta_csv").focus();
					// alert("Please select a score.");
				}
				else if (typeof $('#create_ta_csv').val() === 'undefined'){
					$('#create_ta_csv').focus();
				}
				else if ($('#create_student_csv').val() === ''){
					$("#create_student_csv").focus();
					// alert("Please select a score.");
				}
				else if (typeof $('#create_student_csv').val() === 'undefined'){
					$('#create_student_csv').focus();
				}
				else if ($('#create_student_img').val() === ''){
					$("#create_student_img").focus();
					// alert("Please select a score.");
				}
				else if (typeof $('#create_student_img').val() === 'undefined'){
					$('#create_student_img').focus();
				}
				else {
					$('#addMod').submit();
				}
			})
		})
	</script>
	<script>
		var get_id
		function getID(id) {
			get_id = id
			// console.log(get_id)
		}
		$(document).ready(function () {
			var btn_id = ''
			var moduleNumber = parseInt(document.getElementById("moduleNumber").value)
			// console.log(moduleNumber)
			for (var m = 1; m <= moduleNumber; m++) {
				btn_id = "#modify_submit_"+m
				$(btn_id).click(function (e) {
					// console.log(get_id)
					var mod_name = "#modify_modName_" + get_id
					var mod_NW = "#modify_modNW_" + get_id
					var mod_des = "#modify_Des_" + get_id
					var mod_plan = "#modify_Plan_" + get_id
					e.preventDefault();
					if ($(mod_name).val() === ''){
						$(mod_name).focus();
						// alert("Please select a score.");
					}
					else if (typeof $(mod_name).val() === 'undefined'){
						$(mod_name).focus();
					}
					else if ($(mod_name).val().length > 100){
						$(mod_name).focus();
						alert("You have exceeded the 100 maximum character");
					}
					else if ($(mod_NW).val() === ''){
						$(mod_NW).focus();
						// alert("Please select a score.");
					}
					else if (typeof $(mod_NW).val() === 'undefined'){
						$(mod_NW).focus();
					}
					else if (parseInt($(mod_NW).val()) > 20 || parseInt($(mod_NW).val()) < 5){
						$(mod_NW).focus();
						alert("Week number should be an integer with range from 5 to 20.");
					}
					else if ($(mod_des).val() === ''){
						$(mod_des).focus();
						// alert("Please select a score.");
					}
					else if (typeof $(mod_des).val() === 'undefined'){
						$(mod_des).focus();
					}
					else if ($(mod_des).val().length > 200){
						$(mod_des).focus();
						alert("You have exceeded the 200 maximum character");
					}
					else if ($(mod_plan).val() === ''){
						$(mod_plan).focus();
						// alert("Please select a score.");
					}
					else if (typeof $(mod_plan).val() === 'undefined'){
						$(mod_plan).focus();
					}
					else if ($(mod_plan).val().length > 500){
						$(mod_plan).focus();
						alert("You have exceeded the 500 maximum character");
					}
					else {
						$('#modifyMod_' + get_id).submit();
					}
				});
			}
		});
	</script>
	</body>
</html>
